<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS PLAYGROUND</title>
    <link rel="icon" href="src/icono.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <video id="bg" autoplay muted loop playsinline>
        <source src="src/fondo.mp4" type="video/mp4">
      </video>
      <div class="filtro"></div>
    <div id="contenedor2">
        <header>
        </header>
        <div id="contenido2">
            <div id="logo" style="grid-area: LOG; width: auto; height: auto;"></div>
            <a style="grid-area: BOT;" href="game.html?nivel=1">Iniciar juego</a>
        </div>
        <div id="contenido3">
        </div>
        <footer></footer>
    </div>
</body>
</html>


<script>
    const DB_KEY = "nivelesEstado";

// Funci칩n para inicializar la base de datos interna
function initDB(niveles) {
  if (!localStorage.getItem(DB_KEY)) {
    const db = {};
    niveles.forEach(nivel => {
      db[nivel.nivel] = { completado: false };
    });
    localStorage.setItem(DB_KEY, JSON.stringify(db));
  }
}

// Funci칩n para obtener el estado de los niveles
function obtenerEstados() {
  return JSON.parse(localStorage.getItem(DB_KEY)) || {};
}

// Funci칩n para marcar un nivel como completado
function marcarCompletado(nivelNumero) {
  const db = obtenerEstados();
  if (db[nivelNumero]) {
    db[nivelNumero].completado = true;
    localStorage.setItem(DB_KEY, JSON.stringify(db));
  }
}

// Cargar niveles y mostrarlos
fetch('src/niveles.json')
  .then(res => res.json())
  .then(niveles => {
    initDB(niveles);
    const estados = obtenerEstados();
    const container = document.getElementById("contenido3");
    container.innerHTML = ""; // limpiar contenido

    niveles.forEach(nivel => {
      const link = document.createElement("a");
      link.href = `game.html?nivel=${nivel.nivel}`;
      link.textContent = `Nivel ${nivel.nivel}`;

      // Si est치 completado, pintamos celeste y agregamos mensaje
      if (estados[nivel.nivel] && estados[nivel.nivel].completado) {
      link.classList.add("nivel2");

        const mensaje = document.createElement("span");
        mensaje.textContent = " - Completado";
        link.appendChild(mensaje);
      }else{
      link.classList.add("nivel");

      }

      container.appendChild(link);
    });
  })
  .catch(err => console.error("Error cargando niveles:", err));

  </script>