<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Historial y Progreso</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
  <header>
    <h1>FREEGYM</h1>
    <nav>
        <button class="opcion" onclick="home()">Home</button>
        <button class="opcion" onclick="compartir()">Compartir rutina</button>
        <button class="opcion" onclick="cerrarsesion()">Cerrar sesión</button>
        <button id="butsidebar">☰</button>
    </nav>
</header>
  <section>
<h2>Historial de Entrenamientos</h2>
<h3 id="rachaDias">Racha de días: 0</h3>
<p id="historialList"></p>
</section>
</div>
<div id="sidebar">
  <button class="opcion" onclick="home()">Home</button>
  <button class="opcion" onclick="compartir()">Compartir rutina</button>
  <button class="opcion" onclick="cerrarsesion()">Cerrar sesión</button>
</div>

<script src="src/JS/sidebar.js"></script>
<script>
let usuario=JSON.parse(localStorage.getItem("usuarioActivo"));
if(!usuario) window.location.href="index.html";

document.getElementById("rachaDias").textContent="Racha de días: "+(usuario.streakDays||0);

let historialList=document.getElementById("historialList");

(usuario.historial||[]).forEach(h=>{
  const li=document.createElement("li");
  const fecha=new Date(h.fecha).toLocaleString();
  li.innerHTML=`<b>${h.rutina}</b> - ${fecha}<ul></ul>`;
  const ul=li.querySelector("ul");

  h.ejercicios.forEach((ex,i)=>{
    const liEx=document.createElement("li");
    let seriesText=ex.map((s,j)=>`Serie ${j+1}: ${s.cantidad} ${s.tipo}`).join(", ");
    liEx.textContent=`Ejercicio ${i+1}: ${seriesText}`;
    ul.appendChild(liEx);
  });

  historialList.appendChild(li);
});
</script>
</body>
</html>
